<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gasolineras Espa√±a - Comparador + El√©ctrico</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.3/MarkerCluster.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.3/MarkerCluster.Default.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.3/leaflet.markercluster.min.js"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;overflow:hidden}#map{height:100vh;width:100%;position:fixed;top:0;left:0;z-index:1}.sidebar{position:fixed;left:0;top:0;width:400px;height:100vh;background:white;box-shadow:2px 0 10px rgba(0,0,0,0.2);z-index:1000;display:flex;flex-direction:column}.comparator-panel{position:fixed;right:0;top:0;width:450px;height:100vh;background:white;box-shadow:-2px 0 10px rgba(0,0,0,0.2);z-index:1001;display:flex;flex-direction:column;transform:translateX(100%);transition:transform 0.3s ease}.comparator-panel.open{transform:translateX(0)}.sidebar-scroll{flex:1;overflow-y:auto}.sidebar-scroll::-webkit-scrollbar{width:8px}.sidebar-scroll::-webkit-scrollbar-track{background:#f1f1f1}.sidebar-scroll::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.selected-for-compare{background-color:#dbeafe!important;border-left:4px solid #2563eb!important}.toggle-btn{padding:0.5rem 1rem;border-radius:0.5rem;font-size:0.875rem;font-weight:500;transition:all 0.2s;cursor:pointer;border:none}.toggle-btn.active{background:#2563eb;color:white}.toggle-btn.inactive{background:#e5e7eb;color:#6b7280}@media (max-width:768px){.sidebar{width:100%;height:50vh;top:auto;bottom:0}.comparator-panel{width:100%;height:70vh}#map{height:50vh}}
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="root"></div>
    <script type="text/babel">
        const{useState,useEffect}=React;let mapInstance=null,markerClusterGroup=null,userMarker=null;const App=()=>{const[stations,setStations]=useState([]),[chargers,setChargers]=useState([]),[filteredItems,setFilteredItems]=useState([]),[loading,setLoading]=useState(!0),[error,setError]=useState(null),[viewMode,setViewMode]=useState('gas'),[selectedFuel,setSelectedFuel]=useState('Precio Gasolina 95 E5'),[searchTerm,setSearchTerm]=useState(''),[sortBy,setSortBy]=useState('price'),[userLocation,setUserLocation]=useState(null),[showFilters,setShowFilters]=useState(!0),[selectedProvince,setSelectedProvince]=useState(''),[priceStats,setPriceStats]=useState({min:0,max:0,avg:0}),[mapInitialized,setMapInitialized]=useState(!1),[compareMode,setCompareMode]=useState(!1),[compareStations,setCompareStations]=useState([]),fuelTypes=['Precio Gasolina 95 E5','Precio Gasolina 98 E5','Precio Gasoleo A','Precio Gasoleo B','Precio Gasoleo Premium'];useEffect(()=>{const initMap=()=>{if(!mapInstance){mapInstance=L.map('map').setView([40.4168,-3.7038],7);L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'¬© OpenStreetMap',maxZoom:19}).addTo(mapInstance);markerClusterGroup=L.markerClusterGroup({maxClusterRadius:50,spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0});mapInstance.addLayer(markerClusterGroup);setTimeout(()=>{mapInstance.invalidateSize();setMapInitialized(!0)},200)}};initMap();fetchStations();fetchChargers();getUserLocation()},[]);const fetchStations=async()=>{try{setLoading(!0);const response=await fetch('https://sedeaplicaciones.minetur.gob.es/ServiciosRESTCarburantes/PreciosCarburantes/EstacionesTerrestres/'),data=await response.json(),stationsData=data.ListaEESSPrecio.map(station=>({id:'gas-'+station.IDEESS,type:'gas',name:station['R√≥tulo']||'Sin nombre',address:station['Direcci√≥n'],town:station['Municipio'],province:station['Provincia'],postalCode:station['C.P.'],schedule:station['Horario'],lat:parseFloat(station['Latitud'].replace(',','.')),lng:parseFloat(station['Longitud (WGS84)'].replace(',','.')),prices:{'Precio Gasolina 95 E5':parseFloat(station['Precio Gasolina 95 E5']?.replace(',','.'))||null,'Precio Gasolina 98 E5':parseFloat(station['Precio Gasolina 98 E5']?.replace(',','.'))||null,'Precio Gasoleo A':parseFloat(station['Precio Gasoleo A']?.replace(',','.'))||null,'Precio Gasoleo B':parseFloat(station['Precio Gasoleo B']?.replace(',','.'))||null,'Precio Gasoleo Premium':parseFloat(station['Precio Gasoleo Premium']?.replace(',','.'))||null}}));setStations(stationsData);setLoading(!1)}catch(err){setError('Error al cargar datos');setLoading(!1)}},fetchChargers=async()=>{try{const response=await fetch('https://api.openchargemap.io/v3/poi/?output=json&countrycode=ES&maxresults=2000&compact=true&verbose=false'),data=await response.json(),chargersData=data.map((charger,idx)=>({id:'charger-'+charger.ID,type:'charger',name:charger.AddressInfo?.Title||'Punto de carga',address:charger.AddressInfo?.AddressLine1||'',town:charger.AddressInfo?.Town||'',province:charger.AddressInfo?.StateOrProvince||'',lat:charger.AddressInfo?.Latitude,lng:charger.AddressInfo?.Longitude,operator:charger.OperatorInfo?.Title||'Desconocido',connections:charger.Connections||[],usageCost:charger.UsageCost||'Informaci√≥n no disponible'}));setChargers(chargersData)}catch(err){console.error('Error cargando puntos de carga:',err)}},getUserLocation=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(position=>{const loc={lat:position.coords.latitude,lng:position.coords.longitude};setUserLocation(loc);if(mapInstance){mapInstance.setView([loc.lat,loc.lng],11);userMarker&&userMarker.remove();const userIcon=L.divIcon({html:'<div style="background:#3b82f6;width:20px;height:20px;border-radius:50%;border:3px solid white;box-shadow:0 2px 4px rgba(0,0,0,0.3)"></div>',className:'',iconSize:[20,20],iconAnchor:[10,10]});userMarker=L.marker([loc.lat,loc.lng],{icon:userIcon}).bindPopup('üìç Tu ubicaci√≥n').addTo(mapInstance)}})},calculateDistance=(lat1,lon1,lat2,lon2)=>{const R=6371,dLat=(lat2-lat1)*Math.PI/180,dLon=(lon2-lon1)*Math.PI/180,a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2);return 6371*2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))};useEffect(()=>{if(stations.length>0){const prices=stations.map(s=>s.prices[selectedFuel]).filter(p=>p>0);prices.length>0&&setPriceStats({min:Math.min(...prices),max:Math.max(...prices),avg:prices.reduce((a,b)=>a+b,0)/prices.length})}},[stations,selectedFuel]);useEffect(()=>{let result=[];if(viewMode==='gas'||viewMode==='both'){let gasResults=[...stations];searchTerm&&(gasResults=gasResults.filter(s=>s.town?.toLowerCase().includes(searchTerm.toLowerCase())||s.province?.toLowerCase().includes(searchTerm.toLowerCase())||s.postalCode?.includes(searchTerm)||s.name?.toLowerCase().includes(searchTerm.toLowerCase())));selectedProvince&&(gasResults=gasResults.filter(s=>s.province===selectedProvince));gasResults=gasResults.filter(s=>s.prices[selectedFuel]>0);result=result.concat(gasResults)}if(viewMode==='electric'||viewMode==='both'){let chargerResults=[...chargers];searchTerm&&(chargerResults=chargerResults.filter(c=>c.town?.toLowerCase().includes(searchTerm.toLowerCase())||c.province?.toLowerCase().includes(searchTerm.toLowerCase())||c.name?.toLowerCase().includes(searchTerm.toLowerCase())));selectedProvince&&(chargerResults=chargerResults.filter(c=>c.province===selectedProvince));result=result.concat(chargerResults)}if(sortBy==='price'&&viewMode!=='electric')result.sort((a,b)=>(a.prices?.[selectedFuel]||999)-(b.prices?.[selectedFuel]||999));else if(sortBy==='distance'&&userLocation)result=result.map(item=>({...item,distance:calculateDistance(userLocation.lat,userLocation.lng,item.lat,item.lng)})).sort((a,b)=>a.distance-b.distance);setFilteredItems(result.slice(0,1000))},[stations,chargers,viewMode,searchTerm,selectedFuel,sortBy,selectedProvince,userLocation]);const getPriceColor=price=>{if(!price||!priceStats.min||!priceStats.max)return'#6b7280';const range=priceStats.max-priceStats.min,low=priceStats.min+range*0.33,high=priceStats.min+range*0.66;return price<=low?'#10b981':price<=high?'#f59e0b':'#ef4444'};useEffect(()=>{if(!mapInstance||!markerClusterGroup||!mapInitialized)return;markerClusterGroup.clearLayers();filteredItems.forEach(item=>{if(item.lat&&item.lng&&!isNaN(item.lat)&&!isNaN(item.lng)){const isGas=item.type==='gas';const color=isGas?getPriceColor(item.prices?.[selectedFuel]):'#10b981';const icon=L.divIcon({html:isGas?`<svg width="32" height="42" viewBox="0 0 32 42"><path d="M16 0C7.2 0 0 7.2 0 16c0 11 16 26 16 26s16-15 16-26c0-8.8-7.2-16-16-16z" fill="${color}"/><circle cx="16" cy="16" r="6" fill="white"/></svg>`:`<svg width="32" height="42" viewBox="0 0 32 42"><path d="M16 0C7.2 0 0 7.2 0 16c0 11 16 26 16 26s16-15 16-26c0-8.8-7.2-16-16-16z" fill="#10b981"/><path d="M12 10l8 6-8 6V10z" fill="white"/></svg>`,className:'',iconSize:[32,42],iconAnchor:[16,42],popupAnchor:[0,-42]}),marker=L.marker([item.lat,item.lng],{icon:icon});if(isGas){marker.bindPopup(`<div style="min-width:220px"><strong>${item.name}</strong><br/><div style="font-size:11px;color:#666;margin-top:4px">‚õΩ Gasolinera<br/>üìç ${item.address}<br/>${item.town}, ${item.province}</div><div style="margin-top:8px;padding:8px;background:${color}15;border-radius:6px"><div style="font-size:24px;font-weight:bold;color:${color}">${item.prices[selectedFuel]?.toFixed(3)} ‚Ç¨/L</div></div>${item.distance?`<div style="font-size:11px;margin-top:4px">üìç ${item.distance.toFixed(1)} km</div>`:''}</div>`)}else{const connections=item.connections.slice(0,3).map(c=>`${c.ConnectionType?.Title||'Desconocido'} - ${c.PowerKW||'?'}kW`).join('<br/>');marker.bindPopup(`<div style="min-width:220px"><strong>${item.name}</strong><br/><div style="font-size:11px;color:#666;margin-top:4px">üîå Punto de carga<br/>üìç ${item.address}<br/>${item.town}, ${item.province}</div><div style="margin-top:8px;padding:8px;background:#10b98115;border-radius:6px"><div style="font-size:12px;font-weight:bold;color:#10b981">Conectores:</div><div style="font-size:11px;margin-top:4px">${connections||'Sin informaci√≥n'}</div><div style="font-size:11px;margin-top:4px"><strong>Operador:</strong> ${item.operator}</div><div style="font-size:11px;margin-top:4px"><strong>Coste:</strong> ${item.usageCost}</div></div>${item.distance?`<div style="font-size:11px;margin-top:4px">üìç ${item.distance.toFixed(1)} km</div>`:''}</div>`)}markerClusterGroup.addLayer(marker)}})},[filteredItems,selectedFuel,priceStats,mapInitialized,viewMode]);const centerOnItem=item=>{if(mapInstance&&item.lat&&item.lng){mapInstance.setView([item.lat,item.lng],16);markerClusterGroup.eachLayer(layer=>{layer.getLatLng().lat===item.lat&&layer.getLatLng().lng===item.lng&&layer.openPopup()})}},openDirections=item=>{const url=userLocation?`https://www.google.com/maps/dir/${userLocation.lat},${userLocation.lng}/${item.lat},${item.lng}`:`https://www.google.com/maps/dir/?api=1&destination=${item.lat},${item.lng}`;window.open(url,'_blank')},getPriceBadge=price=>{if(!price||!priceStats.min)return{text:'N/D',class:'bg-gray-100 text-gray-800'};const range=priceStats.max-priceStats.min,low=priceStats.min+range*0.33,high=priceStats.min+range*0.66;return price<=low?{text:'üü¢ Bajo',class:'bg-green-100 text-green-800'}:price<=high?{text:'üü° Medio',class:'bg-yellow-100 text-yellow-800'}:{text:'üî¥ Alto',class:'bg-red-100 text-red-800'}},toggleCompareMode=()=>{compareMode&&setCompareStations([]);setCompareMode(!compareMode)},toggleStationForCompare=station=>{if(station.type!=='gas')return;compareStations.find(s=>s.id===station.id)?setCompareStations(compareStations.filter(s=>s.id!==station.id)):compareStations.length<2?setCompareStations([...compareStations,station]):setCompareStations([compareStations[1],station])},isSelectedForCompare=station=>compareStations.find(s=>s.id===station.id),provinces=[...new Set([...stations.map(s=>s.province),...chargers.map(c=>c.province)])].filter(Boolean).sort();return loading?<div className="sidebar"><div className="h-full flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100"><div className="text-center"><div className="text-6xl mb-4 animate-pulse">‚õΩ</div><p className="text-xl text-gray-700">Cargando datos...</p></div></div></div>:error?<div className="sidebar"><div className="h-full flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100"><div className="bg-white p-8 rounded-lg shadow-lg text-center"><p className="text-red-600 mb-4">{error}</p><button onClick={fetchStations} className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">Reintentar</button></div></div></div>:<><div className="sidebar"><div className="bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-4"><div className="flex items-center justify-between mb-3"><div className="flex items-center gap-2"><span className="text-2xl">‚õΩ</span><h1 className="text-xl font-bold">Gasolineras Espa√±a</h1></div>{viewMode==='gas'&&<button onClick={toggleCompareMode} className={`px-3 py-1.5 rounded text-sm font-medium transition ${compareMode?'bg-white text-blue-600':'bg-blue-700 hover:bg-blue-800'}`}>{compareMode?'‚úì Comparando':'‚öñÔ∏è Comparar'}</button>}</div><div className="flex gap-2 mb-2"><button onClick={()=>setViewMode('gas')} className={`toggle-btn ${viewMode==='gas'?'active':'inactive'}`}>‚õΩ Gasolina</button><button onClick={()=>setViewMode('electric')} className={`toggle-btn ${viewMode==='electric'?'active':'inactive'}`}>üîå El√©ctrico</button><button onClick={()=>setViewMode('both')} className={`toggle-btn ${viewMode==='both'?'active':'inactive'}`}>‚ö° Ambos</button></div><div className="text-sm opacity-90">{filteredItems.length} puntos encontrados</div>{priceStats.min>0&&viewMode!=='electric'&&<div className="mt-2 text-xs opacity-90"><div>üí∞ {priceStats.min.toFixed(3)}‚Ç¨ - {priceStats.max.toFixed(3)}‚Ç¨</div><div>üìä Media: {priceStats.avg.toFixed(3)}‚Ç¨/L</div></div>}{compareMode&&<div className="mt-2 text-xs bg-blue-700 bg-opacity-50 p-2 rounded">‚ÑπÔ∏è Selecciona 2 gasolineras ({compareStations.length}/2)</div>}</div><div className="p-4 border-b"><input type="text" placeholder="üîç Buscar..." value={searchTerm} onChange={e=>setSearchTerm(e.target.value)} className="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm mb-3"/><button onClick={()=>setShowFilters(!showFilters)} className="text-blue-600 text-sm font-medium mb-2">{showFilters?'‚ñ≤':'‚ñº'} Filtros</button>{showFilters&&<div className="space-y-3">{viewMode!=='electric'&&<div><label className="block text-xs font-medium mb-1">Combustible</label><select value={selectedFuel} onChange={e=>setSelectedFuel(e.target.value)} className="w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none">{fuelTypes.map(f=><option key={f} value={f}>{f.replace('Precio ','')}</option>)}</select></div>}<div><label className="block text-xs font-medium mb-1">Provincia</label><select value={selectedProvince} onChange={e=>setSelectedProvince(e.target.value)} className="w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none"><option value="">Todas</option>{provinces.map(p=><option key={p} value={p}>{p}</option>)}</select></div><div><label className="block text-xs font-medium mb-1">Ordenar</label><select value={sortBy} onChange={e=>setSortBy(e.target.value)} className="w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none"><option value="price">Precio</option>{userLocation&&<option value="distance">Distancia</option>}</select></div></div>}</div>{viewMode!=='electric'&&<div className="px-4 py-2 bg-gray-50 border-b text-xs flex gap-3"><span className="flex items-center gap-1"><span className="w-3 h-3 rounded-full bg-green-500"></span>Bajo</span><span className="flex items-center gap-1"><span className="w-3 h-3 rounded-full bg-yellow-500"></span>Medio</span><span className="flex items-center gap-1"><span className="w-3 h-3 rounded-full bg-red-500"></span>Alto</span></div>}<div className="sidebar-scroll">{filteredItems.map(item=>{const isGas=item.type==='gas';const badge=isGas?getPriceBadge(item.prices?.[selectedFuel]):{text:'üîå Cargador',class:'bg-green-100 text-green-800'};const color=isGas?getPriceColor(item.prices?.[selectedFuel]):'#10b981';const selected=isSelectedForCompare(item);return<div key={item.id} onClick={()=>!compareMode&&centerOnItem(item)} className={`p-4 border-b hover:bg-blue-50 transition ${!compareMode&&'cursor-pointer'} ${selected?'selected-for-compare':''}`}><div className="flex justify-between items-start mb-2"><div className="flex-1 pr-2"><div className="text-xs text-gray-500 mb-1">{isGas?'‚õΩ Gasolinera':'üîå Punto de carga'}</div><h3 className="font-semibold text-sm mb-1">{item.name}</h3><p className="text-xs text-gray-600">{item.town}</p><p className="text-xs text-gray-500">{item.province}</p></div><div className="text-right">{isGas?<><div className="text-xl font-bold" style={{color}}>{item.prices[selectedFuel]?.toFixed(3)}</div><div className="text-xs text-gray-500">‚Ç¨/L</div></>:<div className="text-sm text-green-600 font-semibold">{item.connections[0]?.PowerKW?`${item.connections[0].PowerKW}kW`:'Cargador'}</div>}</div></div><div className="flex items-center gap-2 mt-2">{item.distance&&<span className="text-xs text-gray-500">üìç {item.distance.toFixed(1)} km</span>}<span className={`text-xs px-2 py-1 rounded-full ${badge.class}`}>{badge.text}</span></div><div className="mt-2 flex gap-2">{compareMode&&isGas&&<button onClick={()=>toggleStationForCompare(item)} className={`flex-1 px-3 py-1.5 rounded text-xs font-medium transition ${selected?'bg-blue-600 text-white':'bg-gray-200 text-gray-700 hover:bg-gray-300'}`}>{selected?'‚úì Seleccionada':'Seleccionar'}</button>}{!compareMode&&userLocation&&<button onClick={e=>{e.stopPropagation();openDirections(item)}} className="flex-1 bg-blue-600 text-white px-3 py-1.5 rounded text-xs hover:bg-blue-700 transition">üß≠ C√≥mo llegar</button>}</div></div>})}</div></div><ComparatorPanel stations={compareStations} selectedFuel={selectedFuel} userLocation={userLocation} onClose={()=>setCompareStations([])}/></>},ComparatorPanel=({stations,selectedFuel,userLocation,onClose})=>{const[amount,setAmount]=useState(50),[consumption,setConsumption]=useState(6);if(stations.length!==2)return null;const[station1,station2]=stations,price1=station1.prices[selectedFuel],price2=station2.prices[selectedFuel],liters1=amount/price1,liters2=amount/price2,litersDiff=Math.abs(liters2-liters1),kmDiff=litersDiff/consumption*100,cheaperStation=price1<price2?station1:station2,expensiveStation=price1<price2?station2:station1,savingInEuros=litersDiff*Math.min(price1,price2),calculateDistance=(lat1,lon1,lat2,lon2)=>{const R=6371,dLat=(lat2-lat1)*Math.PI/180,dLon=(lon2-lon1)*Math.PI/180,a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2);return 6371*2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))},distanceBetween=userLocation&&station1.lat&&station2.lat?Math.abs(calculateDistance(userLocation.lat,userLocation.lng,station1.lat,station1.lng)-calculateDistance(userLocation.lat,userLocation.lng,station2.lat,station2.lng)):0,extraFuelCost=distanceBetween/100*consumption*Math.min(price1,price2),worthIt=savingInEuros>extraFuelCost;return<div className="comparator-panel open"><div className="bg-gradient-to-r from-purple-600 to-blue-600 text-white p-4"><div className="flex items-center justify-between mb-2"><h2 className="text-xl font-bold">‚öñÔ∏è Comparador</h2><button onClick={onClose} className="text-2xl hover:bg-white hover:bg-opacity-20 w-8 h-8 rounded">√ó</button></div><p className="text-sm opacity-90">Compara y ahorra</p></div><div className="flex-1 overflow-y-auto p-4 space-y-4"><div className="bg-white rounded-lg shadow-md p-4"><h3 className="font-bold mb-3 text-gray-800">üí∂ Configuraci√≥n</h3><div className="mb-4"><label className="block text-sm font-medium text-gray-700 mb-2">Dinero: {amount}‚Ç¨</label><input type="range" min="10" max="100" step="5" value={amount} onChange={e=>setAmount(Number(e.target.value))} className="w-full"/><div className="flex justify-between text-xs text-gray-500 mt-1"><span>10‚Ç¨</span><span>100‚Ç¨</span></div></div><div><label className="block text-sm font-medium text-gray-700 mb-2">Consumo: {consumption} L/100km</label><input type="range" min="4" max="15" step="0.5" value={consumption} onChange={e=>setConsumption(Number(e.target.value))} className="w-full"/><div className="flex justify-between text-xs text-gray-500 mt-1"><span>4 L</span><span>15 L</span></div></div></div><div className="grid grid-cols-2 gap-3"><div className={`bg-white rounded-lg shadow-md p-4 ${price1<price2?'ring-2 ring-green-500':''}`}><div className="text-xs font-semibold text-gray-500 mb-2">{price1<price2?'üèÜ M√ÅS BARATA':'M√ÅS CARA'}</div><h4 className="font-bold text-sm mb-2 text-gray-800">{station1.name}</h4><div className="text-2xl font-bold text-blue-600 mb-1">{price1.toFixed(3)}‚Ç¨</div><div className="text-xs text-gray-500 mb-3">por litro</div><div className="space-y-2 text-sm"><div className="flex justify-between"><span className="text-gray-600">Litros:</span><span className="font-semibold">{liters1.toFixed(2)} L</span></div><div className="flex justify-between"><span className="text-gray-600">Autonom√≠a:</span><span className="font-semibold">{(liters1/consumption*100).toFixed(0)} km</span></div></div></div><div className={`bg-white rounded-lg shadow-md p-4 ${price2<price1?'ring-2 ring-green-500':''}`}><div className="text-xs font-semibold text-gray-500 mb-2">{price2<price1?'üèÜ M√ÅS BARATA':'M√ÅS CARA'}</div><h4 className="font-bold text-sm mb-2 text-gray-800">{station2.name}</h4><div className="text-2xl font-bold text-blue-600 mb-1">{price2.toFixed(3)}‚Ç¨</div><div className="text-xs text-gray-500 mb-3">por litro</div><div className="space-y-2 text-sm"><div className="flex justify-between"><span className="text-gray-600">Litros:</span><span className="font-semibold">{liters2.toFixed(2)} L</span></div><div className="flex justify-between"><span className="text-gray-600">Autonom√≠a:</span><span className="font-semibold">{(liters2/consumption*100).toFixed(0)} km</span></div></div></div></div><div className="bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg shadow-lg p-4"><h3 className="font-bold mb-3 flex items-center gap-2"><span className="text-2xl">üí∞</span>Diferencia</h3><div className="grid grid-cols-2 gap-4"><div><div className="text-xs opacity-90 mb-1">Litros extra</div><div className="text-2xl font-bold">{litersDiff.toFixed(2)} L</div></div><div><div className="text-xs opacity-90 mb-1">Km extra</div><div className="text-2xl font-bold">{kmDiff.toFixed(0)} km</div></div></div><div className="mt-3 pt-3 border-t border-white border-opacity-30"><div className="text-xs opacity-90 mb-1">Ahorro total</div><div className="text-3xl font-bold">{savingInEuros.toFixed(2)}‚Ç¨</div></div></div>{userLocation&&distanceBetween>0&&<div className={rounded-lg shadow-lg p-4 ${worthIt?'bg-gradient-to-r from-blue-500 to-cyan-600 text-white':'bg-gradient-to-r from-orange-500 to-red-600 text-white'}}><h3 className="font-bold mb-3 flex items-center gap-2"><span className="text-2xl">üéØ</span>¬øVale la pena?</h3><div className="space-y-2 text-sm"><div className="flex justify-between"><span className="opacity-90">Distancia extra:</span><span className="font-bold">{distanceBetween.toFixed(1)} km</span></div><div className="flex justify-between"><span className="opacity-90">Coste desv√≠o:</span><span className="font-bold">{extraFuelCost.toFixed(2)}‚Ç¨</span></div><div className="flex justify-between"><span className="opacity-90">Ahorro repostaje:</span><span className="font-bold">{savingInEuros.toFixed(2)}‚Ç¨</span></div></div><div className="mt-3 pt-3 border-t border-white border-opacity-30"><div className="text-lg font-bold text-center">{worthIt?<>‚úÖ S√ç VALE LA PENA<div className="text-sm font-normal opacity-90 mt-1">Ahorras {(savingInEuros-extraFuelCost).toFixed(2)}‚Ç¨ netos</div></>:<>‚õî NO COMPENSA<div className="text-sm font-normal opacity-90 mt-1">Pierdes {(extraFuelCost-savingInEuros).toFixed(2)}‚Ç¨</div></>}</div></div></div>}</div></div>};ReactDOM.render(<App/>,document.getElementById('root'));
</script>
</body>
</html>
